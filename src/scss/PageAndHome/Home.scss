@use 'sass:color';
@use '@scss/Globals/index' as *;

/* ==============================
   Local aliases to global tokens
============================== */
$gold-accent: $color-gold-glow;

/* ==============================
   Asphalt Info Box (kept)
============================== */
.asphalt-info {
  display: flex;
  color: $color-white;
  background-color: $color-black;
  border: 4px solid $table-border-color; /* deep blue frame */
  width: 90rem;
  height: 30rem;
  margin: 3rem auto 5rem auto; /* room under header/nav */
  box-shadow: 0 0 7px 3px $gold-accent;
  border-radius: 12px;
  padding: 2rem;

  @include maxw($tablet-portrait) {
    margin-top: 15rem;
    max-width: 40rem;
    margin-bottom: 4rem;
    height: 31rem;
  }

  @include maxw($cellphone-portrait) {
    flex-direction: column;
    margin-top: 8rem;
    width: 18rem;
    height: 83rem;
  }
}

/* ==============================
   Info Text (kept)
============================== */
.info {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  width: 92%;
  font-size: 21px;
  padding-right: 0;
  margin: 2rem auto;

  @include maxw($tablet-portrait) { width: 35rem; }

  @include maxw($cellphone-portrait) {
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    margin-top: 1.5rem auto;
    width: 18rem;
  }
}

/* ==============================
   Carousel shell
   - no bottom gap
   - rounded corners even during slide
============================== */
#asphalt-carousel-slides {
  position: relative;
  width: 90rem;
  margin: 0 auto 5rem;
  box-shadow: 0 0 7px 6px $gold-accent;
  border: 5px solid $color-black;
  border-radius: 12px;
  line-height: 0; /* eliminate inline-image baseline gap */

  @include maxw($tablet-portrait) {
    width: 38rem;
    height: 19rem;
  }
  @include maxw($cellphone-portrait) {
    margin-top: 5rem;
    width: 21.5rem;
    height: 9.158rem;
    border: 2px solid $color-black;
    box-shadow: 0 0 9px 3px $gold-accent;
    border-radius: 4px;
  }
}

/* keep corners through sliding + ensure the frame keeps its height */
#asphalt-carousel-slides .carousel-inner {
  border-radius: inherit;
  overflow: hidden;                 /* rounds during transitions */
  /* mirror slide height so the window never collapses */
  min-block-size: 37rem;
  @include maxw($tablet-portrait)    { min-block-size: 19rem; }
  @include maxw($cellphone-portrait) { min-block-size: 9.158rem; }
}

/* ==============================
   Sliding TRACK (Bootstrap-like)
   - one row of items that we translate
============================== */
#asphalt-carousel-slides .carousel-track {
  display: flex;
  width: 100%;
  transition: transform 600ms ease-in-out;
}

/* Each slide occupies exactly one frame width */
#asphalt-carousel-slides .carousel-item {
  flex: 0 0 100%;
  /* your sweet spot to remove bottom gap */
  min-block-size: 37rem;

  @include maxw($tablet-portrait)    { min-block-size: 19rem; }
  @include maxw($cellphone-portrait) { min-block-size: 9.158rem; }

  /* ensure the internal box fills the slide */
  > .carousel-image-box {
    inline-size: 100%;
    block-size: 100%;
  }
}

/* container for image + overlay */
.carousel-image-box {
  position: relative;
  border-radius: inherit;
  overflow: hidden; /* keeps image corners rounded while sliding */
  line-height: 0;
}

/* dark overlay while loading */
.carousel-overlay {
  position: absolute;
  inset: 0;
  background-color: #1f1f1f;
  z-index: 1;
  pointer-events: none;
}

/* centered spinner */
.carousel-spinner {
  position: absolute;
  inset: 50% auto auto 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
  text-align: center;
}

/* ==============================
   Carousel Images
============================== */
.d-block {
  display: block;
  inline-size: 100%;
  block-size: 100%;     /* fills the enforced slide height */
  object-fit: contain;  /* car fully visible, no crop */
  border-radius: inherit;

  @include maxw($tablet-portrait)    { block-size: 100%; }
  @include maxw($cellphone-portrait) { block-size: 100%; }
}

/* ==============================
   Motion accessibility
============================== */
@media (prefers-reduced-motion: reduce) {
  .carousel,
  .carousel * {
    animation: none !important;
    transition: none !important;
    scroll-behavior: auto !important;
  }
}